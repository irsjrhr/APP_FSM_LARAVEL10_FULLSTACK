PERUBAHAN COMMIT 30 - 07 - 2025


================== FILE COMMIT ====================

=> Bentuk logic controller BE File yang sekarang mengikuti standar controller lainnya.x
=> di form modal_select_file.php sekarang ada input hidden dengan name user_admin yang di isi oleh php berdasarkan user yang login
=> Pada BE, method path_userStorage() sudah tidak ada di Base_model, tapi dipindahkkan ke File_model dengan nama path_userStorage_user()
=> Sekarang konsep load file index async sudah tidak ada di FE file, jadi load data ajax file berdasarkan pure data yang di request dan di manipulasi di file js dengan membuat DOM langsung 
- lokasi penyimpanan sekarang di service_file/asset_storage 
- Sekarang asset icon untuk setiap elemen  file sudah dikembalikan berdasarkan eksistensinya pada file.js di fungsi getFileIcon(). Kemudian asset tersebut letaknya ada di service_file/asset_storage 
- di form modal_select_file.php sekarang ada input hidden dengan name user_admin yang di isi oleh php berdasarkan user yang login
- Membuat dan memisahkan secara microservice aplikasi, service file BE sendiri yang didalamnya juga menerapkan konsep microservice dengan aplikai route Utama adalah ci

================== API STRUKTUR COMMIT ====================

+++ SISI FE di api.js ++++

=> api.js merupakan file JS yang berisi data dan fungsi fungsi untuk melakukan request ke service BE 
=> ada 2 fungsi yang menjadi dasar dari request tersebut, yaitu get_API() DAN post_API(). Keduanya merupakan dasar fungsi yang memiliki basic request ajax jquery dengan 2 pendekatan method request yang berbeda. untuk get_API() dengan method GET, dan post_API() dengan method POST
=> Kalo get_API dan post_API() berhasil request maka akan menjalankan callback dengan mengembalikan nilai response dari server. Tapi kalo gagal, maka akan menampilkan alert "error data" dan menjalankan callback dengan mengembalikan nilai xhr 
=> Nah dari 2 fungsi tersebut ada cabang fungsi lainnya yang disesuaikan berdasarkan spesifik dari setiap endpoint BE dengan tujuan response tertentu  

=> get_API() 
- memiliki 3 parameter, yaitu ( url_endpoint, data_param, callback ). 
- data_param itu berbentuk object yang nantinya pada GET jadi data yang bentuknya paramter GET di url. itu bisa diisi nilai object kosong. 
- Tujuannya adalah untuk menjadi paremeter decision di BE ketika mengembalikan data, atau hal lainnya berkaitan dengan filter data. 
- Contoh get_API( "https://URL_SERVICE/course", { id_lesson : "10"  } callback ). Artinya kita melakukan request ke https://URL_SERVICE/course?id_lesson=10
=> Nilai responsenya memiliki banyak bentuk jenis yang di dikarenakan varian dari BEnya juga. Hal ini di handle berdasarkan fungsi cabang sesuai dengan tujuan spesifik
=> memiliki fungsi cabang :

+++ get_data( url_endpoint, data_param, callback ),
 
- Fungsi ini adalah cabang dari get_API untuk melakukan request GET ke BE Service dengan spesifik route method endpoint /get_data. 
- Atau kita bisa bilang dia akan request ke https://URL_SERVICE/enpoint_service/get_data. Contoh https://URL_SERVICE_BE/lesson/get_data
- Contoh :  get_data('https://URL_SERVICE/lesson', { id_lesson : "10" }, callback ) artinya melakukan request ke https://URL_SERVICE/course/get_dara?id_lesson=10
- Tujuan dari method ini adalah untuk melakukan request ke BE mengambil banyak row  
- Maka dari itu berdasarkan RESPONSE dari BEnya, maka itu berbentuk array index multi dimensi yang isinya object 
[{},{},{}] atau [] 

+++ get_row( url_endpoint, data_param, callback ), 

- Fungsi ini adalah cabang dari get_API untuk melakukan request GET ke BE Service dengan spesifik route method endpoint /get_row. 
- Atau kita bisa bilang dia akan request ke https://URL_SERVICE/enpoint_service/get_row. Contoh https://URL_SERVICE_BE/lesson/get_row
- Contoh :  get_data('https://URL_SERVICE/lesson', { id_lesson : "10" }, callback ) artinya melakukan request ke https://URL_SERVICE/course/get_row?id_lesson=10
- Tujuan dari method ini adalah untuk melakukan request ke BE dengan 1 data row 
- Maka dari itu berdasarkan RESPONSENYA dari BE nya yaitu 
-. Berbentuk null, kalo BE nya ---- null
-. Berbentuk object, kalo BE nya array associative ---- {}


=> post_API() 
- memiliki 3 parameter, yaitu ( url_endpoint, data_post, callback ). 
- data_post itu nilainya berbentuk object atau bisa juga form serialize yang nantinya pada POST jadi data yang bentuknya input form post. kemudian itu bisa diisi nilai object kosong. 
- Tujuannya adalah untuk menjadi input user untuk melakukan sesuatu seperti CRUD data dan lainnya. 
- Contoh post_API( "https://URL_SERVICE/course/", { id_lesson : "10" } callback ). Artinya kita melakukan request ke https://URL_SERVICE/course/ dengan ada pada input post form yaitu $POST['id_lesson' =>  "10"]
- Nilai responsenya hanya memiliki 2 ketentuan dan itu berlaku untuk semua cabang
{ status : true, msg : "" } kalo berhasil nambah 
{ status : false, msg : "" } kalo gagal nambah
=> memiliki fungsi cabang :

+++ post_tambah_data( url_endpoint, data_param, callback ), 
- Fungsi ini adalah cabang dari post_API untuk melakukan request POST ke BE Service dengan spesifik route method endpoint /post_tambah_data. 
- Atau kita bisa bilang dia akan request ke https://URL_SERVICE/enpoint_service/post_tambah_data. Contoh https://URL_SERVICE_BE/lesson/post_tambah_data
- Contoh :  post_data('https://URL_SERVICE/course', { id_lesson : "10" }, callback ) artinya melakukan request ke https://URL_SERVICE/course/
- Tujuan dari method ini adalah untuk melakukan request ke BE mengambil banyak row  
- Nilai responsenya sama kek di fungsi Utama post ini 


====== ALASAN get_row() punya 2 jenis response dengan bentuk berbeda =========

=> Pada Course service BE itu data get_many melakukan inner join ke data_user ( Relasi One To Many ). Jadi row data akan terambil Ketika row data_course untuk kolom usernya itu memiliki row di data user ( berelasi )

=> Untuk get_single() memiliki 2 jenis pengembalian yaitu :
- Mengembalikan nilai array associative jika data ada. Bisa dikatakan di JS itu object  
- Mengembalikan nilai null kalo data tidak ada. Kalo versi JS nya berarti null

=> Maka berdasarkan pengembalian  get_single() pada BE, dibuatlah fungsi normalisasi antara controller BE dengan api.js di FE Bernama method get_row() 
- Kalo get_single() mengembalikan array kosong -> response json -> di convert ajax -> maka di get_row() jadi nilai null
- Kalo get_single() mengembalikan array associative -> response json -> di convert ajax -> maka di get_row() jadi nilai object

=> Tujuannya agar di FE JS tidak kebingungan untuk melakukan suatu pengkondisian data itu ada atau tidak Ketika mengambil satu data



=========== AUTH HEADER API COMMIT  ==================

=> Memasukkan nilai berupa user yang sudah login ke setiap request yang dilakukan oleh aplikasi ke service BE pada bagian struktur header dengan keynya user_login

+++ Sisi FE Service +++
=> Untuk mengambil nilai user login tersebut di api.js ada fungsi Bernama get_userLogin()
=> Jadi di api.js Fungsi request Utama yaitu get_API() dan post_API() akan melakukan request yang memiliki struktur headers dengan isinya hasil return get_userLogin()
=> get_userLogin() ini nantinya akan mengambil nilai yang disimpan aplikasi Ketika user berhasil login 

+++ Sisi BE Service CI +++
=> Untuk menagkap nilai di struktur header pada request tadi, kita memiliki model class baru Bernama Base_service
=> Base_service ini akan menjadi middleware pada aplikasi service tersebut dengan di autoload. Jadi semua controller dan model bisa menggunakan model class ini
=> Setiap kali ada request, Base_service ini akan menangkap informasi header dan ditaro di suatu public property Bernama user_login
=> BE menangkap informasi header tersebut lewat middleware Base_service yang ada pada property user_login. 
=> Maka dari itu kalo ada model yang membuatuhkan suatu nilai user yang login, maka bisa menggunakan Base_service->user_login. 

- Contoh : Course model memiliki method tambah dengan kolom user_admin yang diisi oleh nilai dari user yang login. Maka pada method tersebut :
public function tambah(){
	
	$user_admin = $this->Base_service->user_login;
	$nama_course = $this->input->post('nama_course')


}
=> Kemudian itu berlaku untuk semua model BE, kecuali BE File


============= App Course Commit ==============

=> Untuk mengunjungi AppCourse, maka harus ada parameter wajib yaitu id_course dan itu di set di constructnya. Ketika di method lessonnya, maka harus ada id_lessonnya. Jadi :

AppCourse/index?id_course=
AppCourse/lesson?id_course=&id_lesson=

=> Kedua nilai parameter tersebut akan disimpan di atribut pada body yaitu data-id-course dan data-id-lesson
=> Kemudian, nantinya di app_course_api.js akan melakukan suatu validasi berdasarkan atribut pada body tersebut. Kalo id course dan id lesson itu valid atau datanya ada, maka semua fitur di app course bisa dijalankan. Tapi kalo tidak, maka aka terhapus semua elemennya 





