<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rancangan Database Sistem FSM</title>
    <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
        background-color: #f5f7fa;
        color: #333;
        line-height: 1.6;
        padding: 20px;
        max-width: 1200px;
        margin: 0 auto;
    }

    .container {
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        padding: 30px;
        margin-bottom: 30px;
    }

    header {
        text-align: center;
        margin-bottom: 40px;
        padding-bottom: 20px;
        border-bottom: 2px solid #4a6fa5;
    }

    h1 {
        color: #2c3e50;
        font-size: 2.5rem;
        margin-bottom: 10px;
    }

    .subtitle {
        color: #7f8c8d;
        font-size: 1.2rem;
        font-weight: 300;
    }

    h2 {
        color: #3498db;
        margin: 25px 0 15px;
        padding-bottom: 8px;
        border-bottom: 1px solid #eee;
    }

    h3 {
        color: #2c3e50;
        margin: 20px 0 10px;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    }

    th {
        background-color: #3498db;
        color: white;
        text-align: left;
        padding: 15px;
        font-weight: 600;
    }

    td {
        padding: 12px 15px;
        border-bottom: 1px solid #eee;
    }

    tr:nth-child(even) {
        background-color: #f8f9fa;
    }

    tr:hover {
        background-color: #f1f7fd;
    }

    .pk {
        color: #e74c3c;
        font-weight: 600;
    }

    .fk {
        color: #27ae60;
        font-weight: 600;
    }

    .enum {
        color: #9b59b6;
        font-weight: 600;
    }

    .note {
        background-color: #fffde7;
        border-left: 4px solid #ffd600;
        padding: 15px;
        margin: 20px 0;
        border-radius: 0 4px 4px 0;
    }

    .diagram {
        background-color: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        margin: 25px 0;
        border: 1px solid #eaeaea;
        overflow-x: auto;
    }

    .flow {
        background-color: #e8f5e9;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        border-left: 4px solid #4caf50;
    }

    .btn-container {
        text-align: center;
        margin: 30px 0;
    }

    .print-btn {
        background-color: #3498db;
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 5px;
        font-size: 1rem;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    .print-btn:hover {
        background-color: #2980b9;
    }

    footer {
        text-align: center;
        margin-top: 40px;
        padding-top: 20px;
        border-top: 1px solid #eee;
        color: #7f8c8d;
        font-size: 0.9rem;
    }

    @media print {
        .print-btn {
            display: none;
        }

        body {
            background-color: white;
            padding: 10px;
        }

        .container {
            box-shadow: none;
            padding: 10px;
        }
    }
</style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìã Rancangan Database Sistem FSM</h1>
            <p class="subtitle">Field Service Management - Versi 1.0</p>
            <p class="subtitle" style="font-size: 10px;font-weight: bolder;color: #000;"> Irshandy Juniar Hardadi - @irsjhr </p>
            <p>Dokumen ini berisi rancangan database lengkap untuk sistem FSM dengan tiga role: Admin, Teknisi, User</p>
        </header>
        
        <div class="btn-container">
            <button class="print-btn" onclick="window.print()">üñ®Ô∏è Cetak / Save as PDF</button>
        </div>
        
        <section>
            <h2>üìä Daftar Tabel Database</h2>
            <ul>
                <li><strong>data_user</strong> - Tabel master user sistem</li>
                <li><strong>data_teknisi</strong> - Data khusus teknisi</li>
                <li><strong>data_produk</strong> - Katalog produk/jasa</li>
                <li><strong>data_project</strong> - Data project/pekerjaan</li>
                <li><strong>data_file</strong> - Manajemen file terpusat</li>
                <li><strong>data_project_laporan</strong> - Laporan project</li>
            </ul>
        </section>
        
        <section>
            <h2>üë§ 1. Tabel data_user</h2>
            <table>
                <thead>
                    <tr>
                        <th>Kolom</th>
                        <th>Tipe Data</th>
                        <th>Keterangan</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="pk">id_user (PK)</span></td>
                        <td>INT AUTO_INCREMENT</td>
                        <td>ID unik user</td>
                    </tr>
                    <tr>
                        <td>username</td>
                        <td>VARCHAR(50) UNIQUE</td>
                        <td>Username untuk login</td>
                    </tr>
                    <tr>
                        <td>password</td>
                        <td>VARCHAR(255)</td>
                        <td>Password (hash)</td>
                    </tr>
                    <tr>
                        <td>level</td>
                        <td><span class="enum">ENUM('admin', 'teknisi', 'user')</span></td>
                        <td>Role akses sistem</td>
                    </tr>
                    <tr>
                        <td>nama</td>
                        <td>VARCHAR(100)</td>
                        <td>Nama lengkap user</td>
                    </tr>
                    <tr>
                        <td><span class="fk">id_file_profile (FK)</span></td>
                        <td>INT</td>
                        <td>Referensi ke tabel data_file (foto profil)</td>
                    </tr>
                    <tr>
                        <td>alamat</td>
                        <td>TEXT</td>
                        <td>Alamat lengkap</td>
                    </tr>
                    <tr>
                        <td>email</td>
                        <td>VARCHAR(100)</td>
                        <td>Alamat email</td>
                    </tr>
                    <tr>
                        <td>kontak</td>
                        <td>VARCHAR(20)</td>
                        <td>Nomor telepon</td>
                    </tr>
                    <tr>
                        <td>status</td>
                        <td><span class="enum">ENUM('active', 'inactive')</span></td>
                        <td>Status akun</td>
                    </tr>
                    <tr>
                        <td>waktu</td>
                        <td>TIMESTAMP</td>
                        <td>Waktu registrasi</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="note">
                <strong>Catatan:</strong> Kolom <span class="enum">level</span> digunakan untuk validasi role di controller aplikasi. 
                Nilai: 'admin' (akses penuh), 'teknisi' (fitur teknisi), 'user' (client/pengguna).
            </div>
        </section>
        
        <section>
            <h2>üîß 2. Tabel data_teknisi</h2>
            <table>
                <thead>
                    <tr>
                        <th>Kolom</th>
                        <th>Tipe Data</th>
                        <th>Keterangan</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="pk">id_teknisi (PK)</span></td>
                        <td>INT AUTO_INCREMENT</td>
                        <td>ID unik teknisi</td>
                    </tr>
                    <tr>
                        <td><span class="fk">username (FK)</span></td>
                        <td>VARCHAR(50) UNIQUE</td>
                        <td>Referensi ke data_user.username (One-to-Many)</td>
                    </tr>
                    <tr>
                        <td>lokasi_teknisi</td>
                        <td>VARCHAR(255)</td>
                        <td>Lokasi terkini teknisi</td>
                    </tr>
                    <tr>
                        <td>status_teknisi</td>
                        <td><span class="enum">ENUM('ready', 'booking', 'working')</span></td>
                        <td>Status ketersediaan teknisi</td>
                    </tr>
                    <tr>
                        <td>last_update_lacak</td>
                        <td>TIMESTAMP</td>
                        <td>Waktu update lokasi terakhir</td>
                    </tr>
                    <tr>
                        <td>status</td>
                        <td><span class="enum">ENUM('active', 'inactive')</span></td>
                        <td>Status record</td>
                    </tr>
                    <tr>
                        <td>waktu</td>
                        <td>TIMESTAMP</td>
                        <td>Waktu dibuat</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="note">
                <strong>Fungsi tabel ini:</strong>
                <ul>
                    <li>Menampilkan list teknisi saat user ingin membuat project</li>
                    <li>Menjadi PK untuk tabel data_project dengan relasi One-to-One (1 teknisi = 1 project)</li>
                    <li>Menyimpan informasi tambahan khusus untuk teknisi</li>
                </ul>
            </div>
        </section>
        
        <section>
            <h2>üèóÔ∏è 3. Tabel data_project</h2>
            <table>
                <thead>
                    <tr>
                        <th>Kolom</th>
                        <th>Tipe Data</th>
                        <th>Keterangan</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="pk">id_project (PK)</span></td>
                        <td>INT AUTO_INCREMENT</td>
                        <td>ID unik project</td>
                    </tr>
                    <tr>
                        <td><span class="fk">id_produk (FK)</span></td>
                        <td>INT</td>
                        <td>Referensi ke data_produk</td>
                    </tr>
                    <tr>
                        <td><span class="fk">username_teknisi (FK UNIQUE)</span></td>
                        <td>VARCHAR(50)</td>
                        <td>Referensi ke data_teknisi (One-to-One constraint)</td>
                    </tr>
                    <tr>
                        <td><span class="fk">username_client (FK)</span></td>
                        <td>VARCHAR(50)</td>
                        <td>Referensi ke data_user (client pembuat project)</td>
                    </tr>
                    <tr>
                        <td>nama_project</td>
                        <td>VARCHAR(100)</td>
                        <td>Nama project</td>
                    </tr>
                    <tr>
                        <td>deskripsi</td>
                        <td>TEXT</td>
                        <td>Deskripsi detail project</td>
                    </tr>
                    <tr>
                        <td><span class="fk">id_file_project (FK)</span></td>
                        <td>INT</td>
                        <td>Referensi ke data_file (file pendukung project)</td>
                    </tr>
                    <tr>
                        <td>lokasi_project</td>
                        <td>VARCHAR(255)</td>
                        <td>Lokasi pelaksanaan project</td>
                    </tr>
                    <tr>
                        <td>waktu_mulai</td>
                        <td>DATETIME</td>
                        <td>Jadwal mulai project</td>
                    </tr>
                    <tr>
                        <td>waktu_selesai</td>
                        <td>DATETIME</td>
                        <td>Jadwal selesai project</td>
                    </tr>
                    <tr>
                        <td>status_project</td>
                        <td><span class="enum">ENUM('waiting', 'todo', 'progress', 'done')</span></td>
                        <td>Status progress project</td>
                    </tr>
                    <tr>
                        <td>created_by</td>
                        <td>VARCHAR(50)</td>
                        <td>User yang membuat project</td>
                    </tr>
                    <tr>
                        <td>status</td>
                        <td><span class="enum">ENUM('active', 'inactive')</span></td>
                        <td>Status record</td>
                    </tr>
                    <tr>
                        <td>waktu</td>
                        <td>TIMESTAMP</td>
                        <td>Waktu dibuat project</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="note">
                <strong>Constraint penting:</strong> 
                <span class="fk">username_teknisi</span> memiliki constraint UNIQUE untuk menerapkan relasi One-to-One 
                (1 teknisi hanya bisa menangani 1 project dalam satu waktu).
            </div>
        </section>
        
        <section>
            <h2>üì¶ 4. Tabel data_produk</h2>
            <table>
                <thead>
                    <tr>
                        <th>Kolom</th>
                        <th>Tipe Data</th>
                        <th>Keterangan</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="pk">id_produk (PK)</span></td>
                        <td>INT AUTO_INCREMENT</td>
                        <td>ID unik produk</td>
                    </tr>
                    <tr>
                        <td>nama</td>
                        <td>VARCHAR(100)</td>
                        <td>Nama produk/jasa</td>
                    </tr>
                    <tr>
                        <td>deskripsi</td>
                        <td>TEXT</td>
                        <td>Deskripsi produk</td>
                    </tr>
                    <tr>
                        <td>harga</td>
                        <td>DECIMAL(12,2)</td>
                        <td>Harga produk</td>
                    </tr>
                    <tr>
                        <td><span class="fk">id_file_thumb (FK)</span></td>
                        <td>INT</td>
                        <td>Referensi ke data_file (thumbnail produk)</td>
                    </tr>
                    <tr>
                        <td>user_pembuat</td>
                        <td>VARCHAR(50)</td>
                        <td>Admin pembuat produk</td>
                    </tr>
                    <tr>
                        <td>status</td>
                        <td><span class="enum">ENUM('active', 'inactive')</span></td>
                        <td>Status produk</td>
                    </tr>
                    <tr>
                        <td>waktu</td>
                        <td>TIMESTAMP</td>
                        <td>Waktu dibuat</td>
                    </tr>
                </tbody>
            </table>
        </section>
        
        <section>
            <h2>üìé 5. Tabel data_file</h2>
            <table>
                <thead>
                    <tr>
                        <th>Kolom</th>
                        <th>Tipe Data</th>
                        <th>Keterangan</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="pk">id_file (PK)</span></td>
                        <td>INT AUTO_INCREMENT</td>
                        <td>ID unik file</td>
                    </tr>
                    <tr>
                        <td>user_admin</td>
                        <td>VARCHAR(50)</td>
                        <td>Admin yang mengupload file</td>
                    </tr>
                    <tr>
                        <td>tipe_penyimpanan</td>
                        <td><span class="enum">ENUM('lokal', 'url', 'cloud')</span></td>
                        <td>Metode penyimpanan file</td>
                    </tr>
                    <tr>
                        <td>nama_file</td>
                        <td>VARCHAR(255)</td>
                        <td>Nama asli file</td>
                    </tr>
                    <tr>
                        <td>source_file</td>
                        <td>VARCHAR(255)</td>
                        <td>Path/lokasi file</td>
                    </tr>
                    <tr>
                        <td>status</td>
                        <td><span class="enum">ENUM('active', 'inactive')</span></td>
                        <td>Status file</td>
                    </tr>
                    <tr>
                        <td>waktu</td>
                        <td>TIMESTAMP</td>
                        <td>Waktu upload</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="note">
                <strong>Sistem file terpusat:</strong> Semua file (foto profil, thumbnail produk, file project, laporan) 
                disimpan di tabel ini. Tabel lain hanya menyimpan <span class="fk">id_file</span> sebagai referensi.
            </div>
        </section>
        
        <section>
            <h2>üìã 6. Tabel data_project_laporan</h2>
            <table>
                <thead>
                    <tr>
                        <th>Kolom</th>
                        <th>Tipe Data</th>
                        <th>Keterangan</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="pk">id_project_laporan (PK)</span></td>
                        <td>INT AUTO_INCREMENT</td>
                        <td>ID unik laporan</td>
                    </tr>
                    <tr>
                        <td><span class="fk">id_project (FK UNIQUE)</span></td>
                        <td>INT</td>
                        <td>Referensi ke data_project (One-to-One)</td>
                    </tr>
                    <tr>
                        <td><span class="fk">id_file_laporan (FK)</span></td>
                        <td>INT</td>
                        <td>Referensi ke data_file (file laporan)</td>
                    </tr>
                    <tr>
                        <td>user_pembuat</td>
                        <td>VARCHAR(50)</td>
                        <td>Pembuat laporan (admin/teknisi)</td>
                    </tr>
                    <tr>
                        <td>status</td>
                        <td><span class="enum">ENUM('active', 'inactive')</span></td>
                        <td>Status laporan</td>
                    </tr>
                    <tr>
                        <td>waktu</td>
                        <td>TIMESTAMP</td>
                        <td>Waktu dibuat laporan</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="note">
                <strong>Relasi One-to-One:</strong> 1 project hanya memiliki 1 laporan project.
                Constraint UNIQUE pada <span class="fk">id_project</span> menjamin relasi ini.
            </div>
        </section>
        
        <section>
            <h2>üîó Diagram Relasi Database</h2>
            <div class="diagram">
                <h3>Struktur Relasi Tabel</h3>
                <pre style="font-family: monospace; line-height: 1.5;">
                    data_user (username PK)
                    ‚îÇ
                    ‚îú‚îÄ‚îÄ‚îÄ data_teknisi (username FK) ‚Üí One-to-Many
                    ‚îÇ        ‚îÇ
                    ‚îÇ        ‚îî‚îÄ‚îÄ‚îÄ data_project (username_teknisi FK UNIQUE) ‚Üí One-to-One
                    ‚îÇ                 ‚îÇ
                    ‚îÇ                 ‚îî‚îÄ‚îÄ‚îÄ data_project_laporan (id_project FK UNIQUE) ‚Üí One-to-One
                    ‚îÇ
                    ‚îú‚îÄ‚îÄ‚îÄ data_project (username_client FK) ‚Üí Many-to-One
                    ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ data_produk (user_pembuat FK) ‚Üí Many-to-One
                </pre>
                
                <h3>Keterangan Simbol:</h3>
                <ul>
                    <li><strong>PK</strong> = Primary Key (Kunci utama)</li>
                    <li><strong>FK</strong> = Foreign Key (Kunci asing)</li>
                    <li><strong>UNIQUE</strong> = Constraint untuk relasi One-to-One</li>
                    <li><strong>‚Üí One-to-Many</strong> = 1 user bisa punya banyak record teknisi</li>
                    <li><strong>‚Üí One-to-One</strong> = 1 teknisi hanya bisa 1 project</li>
                </ul>
            </div>
        </section>
        
        <section>
            <h2>üîÑ Flow Bisnis Utama</h2>
            <div class="flow">
                <h3>A. Pembuatan Project</h3>
                <ol>
                    <li><strong>Client (level='user') login</strong> ke sistem</li>
                    <li><strong>Lihat list teknisi tersedia:</strong> 
                        <code>SELECT * FROM data_teknisi WHERE status_teknisi='ready'</code></li>
                        <li><strong>Pilih teknisi & produk</strong> yang diinginkan</li>
                        <li><strong>Insert data project</strong> ‚Üí otomatis update <code>status_teknisi='booking'</code></li>
                        <li><strong>Teknisi mulai kerja</strong> ‚Üí update <code>status_project='progress'</code>, 
                            <code>status_teknisi='working'</code></li>
                            <li><strong>Project selesai</strong> ‚Üí update <code>status_project='done'</code>, 
                                <code>status_teknisi='ready'</code></li>
                            </ol>

                            <h3>B. Status Teknisi</h3>
                            <div style="text-align: center; margin: 15px 0;">
                                <strong>ready ‚Üí booking ‚Üí working ‚Üí ready</strong><br>
                                <small>(assign) &nbsp;&nbsp;&nbsp; (start) &nbsp;&nbsp;&nbsp; (complete)</small>
                            </div>

                            <h3>C. Status Project</h3>
                            <div style="text-align: center; margin: 15px 0;">
                                <strong>waiting ‚Üí todo ‚Üí progress ‚Üí done</strong>
                            </div>
                        </div>
                    </section>



                    <footer>
                        <p>Dokumen Rancangan Database Sistem FSM - Versi 1.0</p>
                        <p>¬© 2026 - Irshandy Juniar Hardadi</p>
                        <p><em>Untuk keperluan implementasi dan dokumentasi teknis</em></p>
                    </footer>
                </div>

                <script>
                    // Script untuk print/PDF
                    document.addEventListener('DOMContentLoaded', function() {
                        console.log('Dokumen Rancangan Database FSM siap!');
                    });
                </script>
            </body>
            </html>