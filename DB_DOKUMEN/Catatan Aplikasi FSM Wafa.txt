+++++++++++++++++++++ Catatan aplikasi FSM  +++++++++++++++++


+++++++++++  Service BE API +++++++++

=> Account url_app/api/account
=> Level url_app/api/level
=> Teknisi url_app/api/teknisi
=> Product url_app/api/product
=> Project url_app/api/project


=> File ( CI 3 ) url_service_file/File 

Note : 
- url_service_be  adalah request untuk BE dengan Laravel
- url_service_file adalah request untuk BE dengan microservice focus untuk BE penyimpanan file
- Untuk path endpointnya itu 1 controller. 


+++++++++++  ROUTE MODUL FE APPS  +++++++++

=> Admin 
=> Teknisi
=> User
=> AppStorage
=> Landing


+++++++++ Admin ++++++++++

=> Dashboard

=> Atur Level 
- ENUM ( Admin, Teknisi, Murid ) 

=> Atur Account 
- Tambah x
- List x
- Update Kolom Data  x
- Update Kolom Level 
- Aktivasi Account
- Hapus 

=> Atur Teknisi ( Reference by user )
- Tambah
- List 
- Update 
- Hapus 

=> Atur Product 
- Tambah 
- List
- Update 
- Hapus

=> Atur Project ( Implementasi Algoritma Penjadwalan ) 
- Tambah Project
- List Project
+ Modal Form Progress Project ( Form Pilih Teknisi, Ubah jadi status project jadi PROGRESS )
+ Modal Monitoring Project ( Detail Project, Lokasi Project, Preview Laporan Project )
+ Modal Form Upload Laporan Project ( Form Upload Laporan File Project )
+ Modal Form Done Project ( Preview Laporan Project dan Form Submit Status Project jadi DONE  )
- Update Project 
- Hapus Project 

=> Atur Laporan 
- Tambah 
- List
- Update 
- Hapus 

=> Monitoring  
- View



+++++++++ Teknisi ++++++++++

=> Dashboard
=> Profile
=> List Project  
+ Modal Monitoring Project ( Detail Project, Lokasi Project, Preview Laporan Project )
+ Modal Upload Laporan Project ( Form Upload Laporan File Project )
=> Submission Project

+++++++++ User ++++++++++

=> Dashboard
=> Profile
=> List Project
=> Create Project 
- Form Project x
- Pemilihan/Rekomendasi Teknisi
- Flownya :  Form Project -> Pemilihan/rekomendasi Teknisi -> Lempat ke Monitoring 
=> Monitoring  
- View

++++++++++ AppStorage ( By User ) ++++++++++
- Tambah dan Upload File By Modal Select File x
- List file storage by local x
- List file storage by cloud x
- List file storage by url x
- Detail info usage local, cloud, url x

Role :
- Admin → Full Access (Account, Pesanan, Jadwal, Monitoring, Storage)
- Teknisi → Akses tugas sendiri (Update lokasi, upload laporan)
- User → Akses pesanan sendiri (Pesan, Lihat status)


+++++ Catatan Aplikasi +++++++
=> Algoritma list penjadwalan yang digunakan itu Haversine
=> Algoritma di implementasikan dalam bentuk sorting pada list teknisi berdasarkan jarak
=> Autentikasi antar-service: API Key internal
=> Format komunikasi: JSON over REST
=> Error handling: { status, message, data }
=> Security: validasi MIME & ukuran file
=> Database utama: MySQL
=> Cache opsional: Redis

+++++++++++ ALUR KOMUNIKASI ANTAR SERVICE +++++++++++
[ FE Laravel + jQuery ]
        │
        ▼
[ Core Laravel API ]
 ├─ Account Service
 ├─ Order & Schedule Service
 └─ Geolocation Service
        │
        ▼
[ Node.js / CI 3 Service (File & Realtime) ]
 ├─ Upload File
 └─ Broadcast Lokasi
        │
        ▼
[ Database MySQL + Storage Folder / S3 ]



====== Catatan Pemilihan/Penjadwalan Otomatis Teknisi ====
=>Terjadi di panel User 
=> Menggunakan Algoritma Harvesaine 
=> Jadi ini hanya system rekomendasi, Ketika client buat project maka akan ditampilkan list teknisi yang tersedia yang datanya berdasarkan pengurutan algoritma tadi
=> Nanti user yang memilih teknisi yang diinginkan


==== Status Project ======

- PENDING -> Ketika project sudah diajukan oleh user/client tapi belum di approve admin
- TO DO -> Ketika project sudah di approve admin tapi belum dimulai oleh teknisi 
- PROGRESS -> Ketika teknisi sudah mulai project
- COMPLETED -> Ketika project sudah teknisi selesaikan dan upload laporan 

==== Status Teknisi ======
- READY -> Ketika teknisi belum menerima project
- BOOKING -> Ketika teknisi sudah menerima project tapi belum mulai project 
- WORKING -> Ketika teknisi sudah mulai project 

=======================================================

user/client buat project -> pemilihan teknisi -> project menunggu approve dengan status WAITING -> status teknisi berubah jadi BOOKING

admin approve -> project berubah status jadi TO DO 

teknisi klik mulai -> project berubah status jadi PROGRESS -> status teknisi berubah jadi WORKING -> aplikasi MULAI update track lokasi teknisi secara otomatis berkala

teknis klik selesai dan upload laporan -> status project berubah jadi DONE -> status teknisi berubah jadi READY -> aplikasi STOP update track lokasi teknisi secara otomatis berkala

=====================================================
=> Ketika teknisi berstatus WORKING, setiap dia ada di halaman panel teknisi, maka aplikasi akan melakukan update lokasi setiap beberapa interval
=> Artinya fungsi update loop tracking akan terjadi Ketika:
- Berada di controller FE panel teknisi
- teknisi yang ada pada panel tersebut sedang berada di status working 

===================================================== CATATAN SETUP ROUTE APLIKASI FE ==============================================================================================


=> Route yang ditetapkan itu setiap pathnya mewakili controller, method, dan view nya masing 

http://url/path1/path2

path1 : mewakili controller  
path2 : mewakili method yang sedang berjalan 

Contoh :

https://127.0.0.1/admin/dashboard

- Artinya menjalankan controller admin dan menjalankan method dashboard dengan halaman view Admin/dashboard.blade.


=> Ada 3 Controller yang menjalankan aplikasi SPA, yaitu 

- Admin
- Teknisi
- User

=> Kemudian route, method, dan view yang menjadi tempat masuk itu adalah di index untuk setiap controller. Dan page setiap menunya akan di tampilkan secara SPA melalui core.js dengan method load_page() 


https://127.0.0.1/admin/  -> Tempat entry admin panel dengan controller Admin dan method view index 
https://127.0.0.1/teknisi/  -> Tempat entry teknisi panel dengan controller Teknisi dan method view index
https://127.0.0.1/user/  -> Tempat entry user panel dengan controller User dan method view index

- Bisa dikatakan ketiga route diatas adalah controller dan method index yang menjalankan SPA 
- Pada view index itu juga header tempat pemanggilan asset css dan footer tempat pemanggil script js berada 


=> Jadi entry masuknya itu method dan view index yang akan menampilkan core sidebar dan header navbar. 
- Setiap eelement menu sidebar dengan selector .link_menu akan berisi data-page dengan nilai url view sectionnya 
- element menu sidebar dengan selector .link_menu ini akan menjalankan event load_page dengan urlnya dan melakukan load ke .main_container pada root dasar spa di view index
- data menu sidebar diatur di setiap controller pada class Menu 
- untuk menu sidebar diatur di method SET_SIDEBAR_MENU()
- untuk menu modal diatur di method SET_MODAL_MENU()

=> Untuk route lain akan dijalankan oleh load_page() secara SPA dan navigasinya ada di menu sidebar pada atribut data-page ( seperti yang sudah dijelaskan )
=> Jika ingin melihat load_page() sedang membuka page apa, maka kita bisa melihat pada console di variable LOAD_PAGE_URL atau kita tinggal melakukan console.log( LOAD_PAGE_URL ) pada console browser  



=> Semua halaman itu core script dinamisnya terhubung dan terletak pada :
- api.js 
- app.js

=> Semua halaman panel SPA itu terhubung dan diatur pada script yang ada di folder public/asset/js/panel_spa dengan corenya adalah 

- core.js 
- core_table.js
- monitoring_lacak.js

=> Kemudian setiap controller dan route entitas memiliki custom spanya sendiri dengan :
- Admin : admin.js dan admin_table.js
- Teknisi : teknisi.js dan teknisi_table.js
- User : user.js dan user_table.js


=> Contoh Flow SPA :


User -> https://127.0.0.1/admin/ -> view index ( header navbar sidebar dan footer ) -> klik class .link_menu -> load_page( 'https://127.0.0.1/admin/dashboard' ) SPA -> load SPA view Admin/dashboard -> append DOM view ke .main_container

================================================================================================

=> Kalo modal_select_file tidak menampilkan data file atau tidak dapat melakukan upload file maka ada beberapa kemungkinan :


- Server BE tempat service_file sedang idak berjalan, kasusnya seperti di local gw. Laravelnya jalan dan meminta request, tapi service_file di CI 3 di server WAMPP servernya mati dan menyebabkan tida berfungsi untuk mengembalikan esponse atu CORS 

- Bisa aja memang server BE tidak mengizinkan akses secara mekanisme langsung karena adanya autorisasi config. Ini biasanya di file hosting  






===========================================================================================================================================
Level ada 3 yaitu Admin, Teknisi, User
Kolom level di data_user itu nilainya digunakan untuk menjadi validasi role ke suatu Fitur antara controller Modul Admin, dan User
Kemudian data_teknisi itu merupakan table fk yang berelasi ke table PK data_user dengan kolom user yang relasinya one to many
table data_teknisi itu digunakan untuk :
- menampilkan list teknisi saat user memilih dan ingin membuat project
- menjadi table PK untuk table data_project dengan kolom id_teknisi yang relasinya adalah one to one ( 1 Teknisi 1 Project ) 